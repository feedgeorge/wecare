/**
 * FeedGeorge API jQuery Bridge
 * v0.1 Jul 2012
 * Copyright etac solutions
 */
/*global jQuery:true, $: true, FG:true, _:true, XDomainRequest: true */
jQuery.support.cors=true;var ajaxOptions={type:"POST",dataType:"json",crossDomain:true};if(!window.XDomainRequest){ajaxOptions.xhrFields={withCredentials:true}}else{ajaxOptions.contentType="text/plain";/*FG.constants.BASE_PROTOCOL=location.protocol*/}jQuery.ajaxSetup(ajaxOptions);window.XDR_SESSION_COOKIE_NAME="PHPSESSID";window.XDR_COOKIE_HEADERS=["PHPSESSID"];(function(h){var k;if(!("__jquery_xdomain__" in h)&&h.browser.msie&&"XDomainRequest" in window&&!("XMLHttpRequest" in window&&"withCredentials" in new XMLHttpRequest())&&document.location.href.indexOf("file:///")==-1){h.__jquery_xdomain__=h.support.cors=true;var d=/^(((([^:\/#\?]+:)?(?:\/\/((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?]+)(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,i=h.ajaxSettings.xhr,o="XDR_SESSION_COOKIE_NAME" in window?window.XDR_SESSION_COOKIE_NAME:"jsessionid",p="XDR_COOKIE_HEADERS" in window?window.XDR_COOKIE_HEADERS:[],c="XDR_HEADERS" in window?window.XDR_HEADERS:["Content-Type"],f={UNSENT:0,OPENED:1,LOADING:3,DONE:4},a=window.XDR_DEBUG&&"console" in window,b,g,j=0;function n(t,s){if(typeof t=="string"){t=[t]}var r,q;for(r=0;r<t.length;r++){q=new RegExp("(?:^|; )"+t[r]+"=([^;]*)","i").exec(document.cookie);q=q&&q[1];if(q){s.call(null,t[r],q)}}}function m(v){if(v.length>=5){var u=v.substring(v.length<=20?0:v.length-20),t=u.length-1,r,q,s;if(u.charAt(t)==="~"){for(r=t--;t>=0&&u.charAt(t)!=="~";t--){}q=parseInt(u.substring(t+1,r));if(!isNaN(q)&&q>=0&&t>=2&&u.charAt(t)==="~"){for(r=t--;t>=0&&u.charAt(t)!=="~";t--){}s=parseInt(u.substring(t+1,r));if(!isNaN(s)&&t>=0&&u.charAt(t)==="~"){r=v.length-q-u.length+t;return[s,v.substring(0,r),v.substr(r,q)]}}}}return[200,v,""]}function e(q){if(typeof(q)==="object"){return q}var r=d.exec(q);return r?{href:r[0]||"",hrefNoHash:r[1]||"",hrefNoSearch:r[2]||"",domain:r[3]||"",protocol:r[4]||"",authority:r[5]||"",username:r[7]||"",password:r[8]||"",host:r[9]||"",hostname:r[10]||"",port:r[11]||"",pathname:r[12]||"",directory:r[13]||"",filename:r[14]||"",search:r[15]||"",hash:r[16]||""}:{}}function l(q){q=h.parseJSON(q);var r=[];if(q[o]){r[0]=o+"="+q[o]}return r}g=e(document.location.href).domain;b=function(){var y=this,u=new XDomainRequest(),x,q=[],t,s,w=j++,v=function(z){y.readyState=z;if(typeof y.onreadystatechange==="function"){y.onreadystatechange.call(y)}},r=function(B,A){if(!y.responseText){y.responseText=""}y.status=A;if(!y.responseType){x=x||u.contentType;if(x.match(/\/json/)){y.responseType="json";y.response=y.responseText}else{if(x.match(/\/xml/)){y.responseType="document";var z,C=new ActiveXObject("Microsoft.XMLDOM");C.async=false;C.loadXML(y.responseText);y.responseXML=y.response=C;if(h(C).children("error").length!=0){z=h(C).find("error");y.status=parseInt(z.attr("response_code"))}}else{y.responseType="text";y.response=y.responseText}}}v(B);u=null;q=null;s=null};u.onprogress=function(){v(f.LOADING)};u.ontimeout=function(){r(f.DONE,408)};u.onerror=function(){r(f.DONE,500)};u.onload=function(){var z,A,B=m(u.responseText||"");z=l(u.responseText);y.responseText=B[1]||"";for(A=0;A<z.length;A++){document.cookie=z[A]+";Domain="+document.domain}r(f.DONE,B[0]);B=null};this.readyState=f.UNSENT;this.status=0;this.statusText="";this.responseType="";this.timeout=0;this.withCredentials=false;this.overrideMimeType=function(z){x=z};this.abort=function(){u.abort()};this.setRequestHeader=function(A,z){if(h.inArray(A,c)>=0){q.push({k:A,v:z})}};this.open=function(z,A){s=A;t=z;v(f.OPENED)};this.send=function(A){u.timeout=this.timeout;if(o||p||q.length){var z,B=function(C,E){var D=s.indexOf("?");s+=(D===-1?"?":"&")+C+"="+encodeURIComponent(E)};for(z=0;z<q.length;z++){B(q[z].k,q[z].v)}n(p,B);B("_xdr",""+w)}u.open(t,s);u.send(A)};this.getAllResponseHeaders=function(){return""};this.getResponseHeader=function(){return null}};h.ajaxSettings.xhr=function(){var r=e(this.url).domain;k=this;if(r===""||r===g){return i.call(h.ajaxSettings)}else{try{return new b()}catch(q){}}}}})(jQuery);/*if((FG)&&(FG.utils)){"use strict";FG.utils.ajax=function(b,c,d,a){$.ajax({url:b,data:c,success:function(f,e,g){d.apply(FG,[true,f])},error:function(h,f,g){var e={result:{},reason:g};a.apply(FG,[false,e])}})}}*/;